{"ast":null,"code":"var _jsxFileName = \"D:\\\\programky\\\\cook\\\\react\\\\cook\\\\src\\\\components\\\\Form\\\\Form.js\";\nimport React from 'react';\nimport styles from './Form.module.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlus, faMinus } from \"@fortawesome/free-solid-svg-icons\";\nimport IngredienceFormGroup from \"../IngredienceFormGroup/IngredienceFormGroup\";\nimport StepFormGroup from \"../StepFormGroup/StepFormGroup\";\nimport { Redirect } from \"react-router-dom\";\nimport { parse } from \"@fortawesome/fontawesome-svg-core\";\n\nclass Form extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleSave = this.handleSave.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleChangeIngredience = this.handleChangeIngredience.bind(this);\n    this.handleChangeStep = this.handleChangeStep.bind(this);\n    this.addIngredienceField = this.addIngredienceField.bind(this);\n    this.removeIngredienceField = this.removeIngredienceField.bind(this);\n    this.addStepField = this.addStepField.bind(this);\n    this.removeStepField = this.removeStepField.bind(this);\n\n    if (this.props.match.path.includes(\"edit\")) {\n      var obj = JSON.parse(localStorage.getItem(\"detail\"));\n      this.state = {\n        food: {\n          name: obj.Name,\n          category: obj.Category,\n          description: obj.Description,\n          ingrediences: obj.Ingrediences,\n          steps: obj.Steps\n        }\n      };\n    } else this.state = {\n      food: {\n        name: \"\",\n        category: \"\",\n        description: \"\",\n        ingrediences: [],\n        steps: []\n      }\n    };\n  }\n\n  handleSubmit(e) {\n    console.log(\"Submit\");\n    e.preventDefault();\n    this.setState({\n      message: 'Sending...'\n    }, this.sendFormData(false));\n    this.props.history.push('/list');\n  }\n\n  handleSave(e) {\n    e.preventDefault();\n    this.setState({\n      message: 'Sending...'\n    }, this.sendFormData(true));\n    this.props.history.push('/list');\n  }\n\n  handleChange(e) {\n    console.log(e.target.name);\n    let f = this.state.food;\n    f[e.target.name] = e.target.value;\n    this.setState({\n      food: f\n    });\n  }\n\n  handleChangeIngredience(e) {\n    let f = this.state.food;\n    let id = parseInt(e.target.getAttribute(\"data-id\"));\n    f.ingrediences[id][e.target.name] = e.target.value;\n    this.setState({\n      food: f\n    });\n  }\n\n  handleChangeStep(e) {\n    let f = this.state.food;\n    let id = parseInt(e.target.getAttribute(\"data-id\"));\n    f.steps[id][\"Desc\"] = e.target.value;\n    this.setState({\n      food: f\n    });\n  }\n\n  addIngredienceField(e) {\n    let f = this.state.food;\n    f.ingrediences.push({\n      name: \"\",\n      amount: \"\",\n      unit: \"\"\n    });\n    this.setState({\n      food: f\n    });\n  }\n\n  removeIngredienceField(e) {\n    console.log(e.target.id);\n    let f = this.state.food;\n    f.ingrediences.splice(parseInt(e.target.id), 1);\n    this.setState({\n      food: f\n    });\n  }\n\n  addStepField(e) {\n    let f = this.state.food;\n    f.steps.push({\n      desc: \"\"\n    });\n    this.setState({\n      food: f\n    });\n  }\n\n  removeStepField(e) {\n    let f = this.state.food;\n    f.steps.pop();\n    this.setState({\n      food: f\n    });\n  }\n\n  sendFormData(exist) {\n    setTimeout(async () => {\n      this.setState({\n        message: 'data sent!'\n      });\n      let obj = JSON.stringify(this.state.food);\n      console.log(\"BODY: \" + obj);\n      const requestOptions = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: obj\n      };\n      let response = exist ? await fetch(\"/update\", requestOptions) : await fetch(\"/add\", requestOptions);\n      let data = await response.json();\n      return data;\n    }, 3000);\n  }\n\n  render() {\n    let ingredience = [],\n        steps = [];\n    if (this.state.food.ingrediences != undefined) ingredience = this.state.food.ingrediences.map((i, x) => /*#__PURE__*/React.createElement(IngredienceFormGroup, {\n      ingredience: i,\n      index: x.toString(),\n      remove: this.removeIngredienceField,\n      handleChange: this.handleChangeIngredience,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }));\n    if (this.state.food.steps != undefined) steps = this.state.food.steps.map((s, i) => {\n      return /*#__PURE__*/React.createElement(StepFormGroup, {\n        step: s.Desc,\n        id: i,\n        handleChange: this.handleChangeStep,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 65\n        }\n      });\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"col-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }\n    }, \"N\\xE1zev\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"name\",\n      onChange: this.handleChange,\n      value: this.state.food.name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"fieldset\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"legend\", {\n      className: \"col-form-label col-sm-2 pt-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 25\n      }\n    }, \"Radios\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-check\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-check-input\",\n      type: \"radio\",\n      name: \"category\",\n      value: \"polevka\",\n      onChange: this.handleChange,\n      checked: this.state.food.category === \"polevka\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"form-check-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 33\n      }\n    }, \"Pol\\xE9vka\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-check\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-check-input\",\n      type: \"radio\",\n      name: \"category\",\n      value: \"hlavni\",\n      onChange: this.handleChange,\n      checked: this.state.food.category === \"hlavni\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"form-check-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 33\n      }\n    }, \"Hlavn\\xED chod\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-check\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-check-input\",\n      type: \"radio\",\n      name: \"category\",\n      value: \"dezert\",\n      onChange: this.handleChange,\n      checked: this.state.food.category === \"dezert\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"form-check-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 33\n      }\n    }, \"Dezert\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"col-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 21\n      }\n    }, \"Popis\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      name: \"description\",\n      onChange: this.handleChange,\n      value: this.state.food.description,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 25\n      }\n    }, \"Ingredience:\"), ingredience, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-success row\",\n      onClick: this.addIngredienceField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faPlus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 29\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-7\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 25\n      }\n    }, \"Postup:\"), steps, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-danger\",\n      onClick: this.removeStepField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faMinus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-success\",\n      onClick: this.addStepField,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n      icon: faPlus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 33\n      }\n    }))))), this.props.match.path.includes(\"edit\") ? /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      onClick: this.handleSave,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }\n    }, \"Ulo\\u017Eit\") : /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\",\n      onClick: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }\n    }, \"Vytvo\\u0159it\"));\n  }\n\n}\n\nexport default Form;","map":{"version":3,"sources":["D:/programky/cook/react/cook/src/components/Form/Form.js"],"names":["React","styles","FontAwesomeIcon","faPlus","faMinus","IngredienceFormGroup","StepFormGroup","Redirect","parse","Form","Component","constructor","props","handleSubmit","bind","handleSave","handleChange","handleChangeIngredience","handleChangeStep","addIngredienceField","removeIngredienceField","addStepField","removeStepField","match","path","includes","obj","JSON","localStorage","getItem","state","food","name","Name","category","Category","description","Description","ingrediences","Ingrediences","steps","Steps","e","console","log","preventDefault","setState","message","sendFormData","history","push","target","f","value","id","parseInt","getAttribute","amount","unit","splice","desc","pop","exist","setTimeout","stringify","requestOptions","method","headers","body","response","fetch","data","json","render","ingredience","undefined","map","i","x","toString","s","Desc"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styles from './Form.module.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {faPlus, faMinus} from \"@fortawesome/free-solid-svg-icons\";\nimport IngredienceFormGroup from \"../IngredienceFormGroup/IngredienceFormGroup\";\nimport StepFormGroup from \"../StepFormGroup/StepFormGroup\";\nimport {Redirect} from \"react-router-dom\";\nimport {parse} from \"@fortawesome/fontawesome-svg-core\";\n\nclass Form extends React.Component{\n    constructor(props){\n        super(props);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleSave = this.handleSave.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleChangeIngredience = this.handleChangeIngredience.bind(this);\n        this.handleChangeStep = this.handleChangeStep.bind(this);\n        this.addIngredienceField = this.addIngredienceField.bind(this);\n        this.removeIngredienceField = this.removeIngredienceField.bind(this);\n        this.addStepField = this.addStepField.bind(this);\n        this.removeStepField = this.removeStepField.bind(this);\n\n        if(this.props.match.path.includes(\"edit\")){\n            var obj = JSON.parse(localStorage.getItem(\"detail\"));\n            this.state = {\n                food: {\n                    name: obj.Name,\n                    category: obj.Category,\n                    description: obj.Description,\n                    ingrediences:  obj.Ingrediences,\n                    steps: obj.Steps\n                }\n            };\n        }\n        else\n            this.state = {\n                food: {\n                    name: \"\",\n                    category: \"\",\n                    description: \"\",\n                    ingrediences:  [],\n                    steps: []\n                }\n            };\n    }\n\n    handleSubmit(e) {\n        console.log(\"Submit\");\n        e.preventDefault();\n        this.setState({ message: 'Sending...' }, this.sendFormData(false));\n        this.props.history.push('/list')\n    }\n    handleSave(e){\n        e.preventDefault();\n        this.setState({ message: 'Sending...' }, this.sendFormData(true));\n        this.props.history.push('/list')\n    }\n    handleChange(e){\n        console.log(e.target.name);\n        let f = this.state.food;\n        f[e.target.name] = e.target.value;\n        this.setState({food: f});\n    }\n    handleChangeIngredience(e){\n        let f = this.state.food;\n        let id = parseInt(e.target.getAttribute(\"data-id\"));\n        f.ingrediences[id][e.target.name] = e.target.value;\n        this.setState({food: f});\n    }\n    handleChangeStep(e){\n        let f = this.state.food;\n        let id = parseInt(e.target.getAttribute(\"data-id\"));\n        f.steps[id][\"Desc\"] = e.target.value;\n        this.setState({food: f});\n    }\n\n    addIngredienceField(e) {\n        let f = this.state.food;\n        f.ingrediences.push({name: \"\", amount:\"\", unit: \"\"});\n        this.setState({food: f});\n    }\n    removeIngredienceField(e){\n        console.log(e.target.id);\n        let f = this.state.food;\n        f.ingrediences.splice(parseInt(e.target.id), 1);\n        this.setState({food: f});\n    }\n\n    addStepField(e){\n        let f = this.state.food;\n        f.steps.push({desc:\"\"});\n        this.setState({food: f});\n    }\n    removeStepField(e){\n        let f = this.state.food;\n        f.steps.pop();\n        this.setState({food: f});\n    }\n\n    sendFormData(exist) {\n        setTimeout(async () => {\n            this.setState({ message: 'data sent!' });\n            let obj = JSON.stringify(this.state.food);\n            console.log(\"BODY: \" + obj)\n            const requestOptions = {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: obj\n            };\n            let response = exist? await fetch(\"/update\", requestOptions) :  await fetch(\"/add\", requestOptions);\n            let data = await response.json()\n            return data;\n        }, 3000);\n    }\n\n    render(){\n        let ingredience = [], steps = [];\n        if(this.state.food.ingrediences != undefined)\n            ingredience = this.state.food.ingrediences.map( (i,x) =>\n                <IngredienceFormGroup ingredience={i} index={x.toString()} remove={this.removeIngredienceField} handleChange={this.handleChangeIngredience}/>\n                );\n        if(this.state.food.steps != undefined)\n            steps = this.state.food.steps.map((s,i) => { return(<StepFormGroup step={s.Desc} id={i} handleChange={this.handleChangeStep}/>)});\n\n        return(\n        <div>\n                <div className=\"form-group row\">\n                    <label className=\"col-2\">Název</label>\n                    <div className=\"col-10\">\n                        <input type=\"text\" className=\"form-control\" name=\"name\" onChange={this.handleChange} value={this.state.food.name}/>\n                    </div>\n                </div>\n\n                <fieldset className=\"form-group\">\n                    <div className=\"row\">\n                        <legend className=\"col-form-label col-sm-2 pt-0\">Radios</legend>\n                        <div className=\"col-sm-10\">\n                            <div className=\"form-check\">\n                                <input className=\"form-check-input\" type=\"radio\" name=\"category\" value=\"polevka\"  onChange={this.handleChange}\n                                       checked={this.state.food.category === \"polevka\"}/>\n                                <label className=\"form-check-label\">Polévka</label>\n                            </div>\n                            <div className=\"form-check\">\n                                <input className=\"form-check-input\" type=\"radio\" name=\"category\" value=\"hlavni\"  onChange={this.handleChange}\n                                       checked={this.state.food.category === \"hlavni\"}/>\n                                <label className=\"form-check-label\">Hlavní chod</label>\n                            </div>\n                            <div className=\"form-check\">\n                                <input className=\"form-check-input\" type=\"radio\" name=\"category\" value=\"dezert\" onChange={this.handleChange}\n                                       checked={this.state.food.category === \"dezert\"}/>\n                                <label className=\"form-check-label\">Dezert</label>\n                            </div>\n                        </div>\n                    </div>\n                </fieldset>\n\n                <div className=\"form-group row\">\n                    <label className=\"col-2\">Popis</label>\n                    <div className=\"col-10\">\n                        <input type=\"text\" className=\"form-control\" name=\"description\" onChange={this.handleChange} value={this.state.food.description}/>\n                    </div>\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"col-5\">\n                        <h3>Ingredience:</h3>\n                        {ingredience}\n                        <button className=\"btn btn-success row\" onClick={this.addIngredienceField}>\n                            <FontAwesomeIcon icon={faPlus} />\n                        </button>\n                    </div>\n                    <div className=\"col-7\">\n                        <h3>Postup:</h3>\n                        {steps}\n                        <div className=\"form-group\">\n                            <button className=\"btn btn-danger\" onClick={this.removeStepField}>\n                                <FontAwesomeIcon icon={faMinus} />\n                            </button>\n                            <button className=\"btn btn-success\" onClick={this.addStepField}>\n                                <FontAwesomeIcon icon={faPlus} />\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            {this.props.match.path.includes(\"edit\") ?\n                <button type=\"submit\" className=\"btn btn-primary\" onClick={this.handleSave}>Uložit</button>\n                :\n                <button type=\"submit\" className=\"btn btn-primary\" onClick={this.handleSubmit}>Vytvořit</button>\n            }\n        </div>\n        );\n    }\n}\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}