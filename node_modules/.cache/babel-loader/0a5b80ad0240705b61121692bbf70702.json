{"ast":null,"code":"async function callApi(path) {\n  /*fetch(path)\r\n      .then(async response => {\r\n          const data = await response.json();\r\n          //console.log(\"JSON: \" + data.content);\r\n          return data.content;\r\n      });*/\n  let response = await fetch(path);\n  let data = await response.json();\n  return data;\n}\n\nexport async function getFoods() {\n  let data = await callApi(\"/food\");\n  return data;\n}\nexport async function getDetail(id) {\n  let data = await callApi(\"/detail/\" + {\n    id\n  });\n  return data;\n}\nexport function getFilterFoods(name, categories, ingredience) {\n  let data = getFoods();\n  if (name != null) data = getByName(data, name);\n  if (categories != null) data = getByCategory(data, categories); //if (ingredience)\n}\n/**Filter functions */\n\nexport function getByName(data, name) {\n  return data.forEach(d => {\n    if (d.name == name) return d;\n  });\n}\nexport function getByCategory(data, categories) {\n  return data.filter(d => {\n    if (categories.include(d.category)) return d;\n  });\n}\nexport function getByIngredience(data, ingredience) {\n  let len = ingredience.length;\n  return data.filter(d => {\n    var n = 0;\n    ingredience.forEach(i => {\n      if (i.ingrediences.includes(i)) n++;\n    });\n    if (n == len) return d;\n  });\n}\nexport async function removeFood(name) {\n  let data = await callApi(\"/delete/?name=\" + name);\n  return data;\n}","map":{"version":3,"sources":["D:/programky/cook/react/cook/src/api.js"],"names":["callApi","path","response","fetch","data","json","getFoods","getDetail","id","getFilterFoods","name","categories","ingredience","getByName","getByCategory","forEach","d","filter","include","category","getByIngredience","len","length","n","i","ingrediences","includes","removeFood"],"mappings":"AACA,eAAeA,OAAf,CAAuBC,IAAvB,EAA4B;AACxB;;;;;;AAMA,MAAIC,QAAQ,GAAG,MAAMC,KAAK,CAACF,IAAD,CAA1B;AACA,MAAIG,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAAjB;AACA,SAAOD,IAAP;AACH;;AAED,OAAO,eAAeE,QAAf,GAAyB;AAC5B,MAAIF,IAAI,GAAG,MAAMJ,OAAO,CAAC,OAAD,CAAxB;AACA,SAAOI,IAAP;AACH;AAED,OAAO,eAAeG,SAAf,CAAyBC,EAAzB,EAA4B;AAC/B,MAAIJ,IAAI,GAAG,MAAMJ,OAAO,CAAC,aAAY;AAACQ,IAAAA;AAAD,GAAb,CAAxB;AACA,SAAOJ,IAAP;AACH;AAED,OAAO,SAASK,cAAT,CAAwBC,IAAxB,EAA8BC,UAA9B,EAA0CC,WAA1C,EAAsD;AACzD,MAAIR,IAAI,GAAGE,QAAQ,EAAnB;AACA,MAAII,IAAI,IAAI,IAAZ,EACIN,IAAI,GAAGS,SAAS,CAACT,IAAD,EAAOM,IAAP,CAAhB;AACJ,MAAIC,UAAU,IAAI,IAAlB,EACGP,IAAI,GAAGU,aAAa,CAACV,IAAD,EAAOO,UAAP,CAApB,CALsD,CAMzD;AACH;AAED;;AAEA,OAAO,SAASE,SAAT,CAAmBT,IAAnB,EAAyBM,IAAzB,EAA8B;AACjC,SAAON,IAAI,CAACW,OAAL,CAAcC,CAAC,IAAI;AACtB,QAAGA,CAAC,CAACN,IAAF,IAAUA,IAAb,EACI,OAAOM,CAAP;AACP,GAHM,CAAP;AAIH;AAED,OAAO,SAASF,aAAT,CAAuBV,IAAvB,EAA6BO,UAA7B,EAAwC;AAC3C,SAAOP,IAAI,CAACa,MAAL,CAAYD,CAAC,IAAI;AACpB,QAAGL,UAAU,CAACO,OAAX,CAAmBF,CAAC,CAACG,QAArB,CAAH,EACI,OAAOH,CAAP;AACP,GAHM,CAAP;AAIH;AAED,OAAO,SAASI,gBAAT,CAA0BhB,IAA1B,EAAgCQ,WAAhC,EAA4C;AAC/C,MAAIS,GAAG,GAAGT,WAAW,CAACU,MAAtB;AACA,SAAOlB,IAAI,CAACa,MAAL,CAAYD,CAAC,IAAI;AACpB,QAAIO,CAAC,GAAG,CAAR;AACAX,IAAAA,WAAW,CAACG,OAAZ,CAAoBS,CAAC,IAAI;AACrB,UAAGA,CAAC,CAACC,YAAF,CAAeC,QAAf,CAAwBF,CAAxB,CAAH,EACID,CAAC;AACR,KAHD;AAIA,QAAGA,CAAC,IAAIF,GAAR,EACI,OAAOL,CAAP;AACP,GARM,CAAP;AASH;AAED,OAAO,eAAeW,UAAf,CAA0BjB,IAA1B,EAA+B;AAClC,MAAIN,IAAI,GAAG,MAAMJ,OAAO,CAAC,mBAAkBU,IAAnB,CAAxB;AACA,SAAON,IAAP;AACH","sourcesContent":["\r\nasync function callApi(path){\r\n    /*fetch(path)\r\n        .then(async response => {\r\n            const data = await response.json();\r\n            //console.log(\"JSON: \" + data.content);\r\n            return data.content;\r\n        });*/\r\n    let response = await fetch(path);\r\n    let data = await response.json()\r\n    return data;\r\n}\r\n\r\nexport async function getFoods(){\r\n    let data = await callApi(\"/food\");\r\n    return data;\r\n}\r\n\r\nexport async function getDetail(id){\r\n    let data = await callApi(\"/detail/\"+ {id});\r\n    return data;\r\n}\r\n\r\nexport function getFilterFoods(name, categories, ingredience){\r\n    let data = getFoods();\r\n    if (name != null)\r\n        data = getByName(data, name);\r\n    if (categories != null)\r\n       data = getByCategory(data, categories);\r\n    //if (ingredience)\r\n}\r\n\r\n/**Filter functions */\r\n\r\nexport function getByName(data, name){\r\n    return data.forEach( d => {\r\n        if(d.name == name)\r\n            return d;\r\n    })\r\n}\r\n\r\nexport function getByCategory(data, categories){\r\n    return data.filter(d => {\r\n        if(categories.include(d.category))\r\n            return d;\r\n    })\r\n}\r\n\r\nexport function getByIngredience(data, ingredience){\r\n    let len = ingredience.length;\r\n    return data.filter(d => {\r\n        var n = 0;\r\n        ingredience.forEach(i => {\r\n            if(i.ingrediences.includes(i))\r\n                n++;\r\n        })\r\n        if(n == len)\r\n            return d;\r\n    })\r\n}\r\n\r\nexport async function removeFood(name){\r\n    let data = await callApi(\"/delete/?name=\"+ name);\r\n    return data;\r\n}\r\n"]},"metadata":{},"sourceType":"module"}