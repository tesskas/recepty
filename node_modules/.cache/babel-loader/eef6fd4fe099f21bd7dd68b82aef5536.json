{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\programky\\\\cook\\\\react\\\\cook\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\programky\\\\cook\\\\react\\\\cook\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\programky\\\\cook\\\\react\\\\cook\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\programky\\\\cook\\\\react\\\\cook\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:\\\\programky\\\\cook\\\\react\\\\cook\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:\\\\programky\\\\cook\\\\react\\\\cook\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\programky\\\\cook\\\\react\\\\cook\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import styles from'./Form.module.css';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPlus,faMinus}from\"@fortawesome/free-solid-svg-icons\";import IngredienceFormGroup from\"../IngredienceFormGroup/IngredienceFormGroup\";import StepFormGroup from\"../StepFormGroup/StepFormGroup\";import{Redirect}from\"react-router-dom\";import{parse}from\"@fortawesome/fontawesome-svg-core\";var Form=/*#__PURE__*/function(_React$Component){_inherits(Form,_React$Component);var _super=_createSuper(Form);function Form(props){var _this;_classCallCheck(this,Form);_this=_super.call(this,props);_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.handleSave=_this.handleSave.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleChangeIngredience=_this.handleChangeIngredience.bind(_assertThisInitialized(_this));_this.handleChangeStep=_this.handleChangeStep.bind(_assertThisInitialized(_this));_this.addIngredienceField=_this.addIngredienceField.bind(_assertThisInitialized(_this));_this.removeIngredienceField=_this.removeIngredienceField.bind(_assertThisInitialized(_this));_this.addStepField=_this.addStepField.bind(_assertThisInitialized(_this));_this.removeStepField=_this.removeStepField.bind(_assertThisInitialized(_this));if(_this.props.match.path.includes(\"edit\")){var obj=JSON.parse(localStorage.getItem(\"detail\"));_this.state={food:{name:obj.Name,category:obj.Category,description:obj.Description,ingrediences:obj.Ingrediences!=null?obj.Ingrediences:[],steps:obj.Steps!=null?obj.Steps:[]}};}else _this.state={food:{name:\"\",category:\"\",description:\"\",ingrediences:[],steps:[]}};return _this;}_createClass(Form,[{key:\"handleSubmit\",value:function handleSubmit(e){e.preventDefault();this.setState({message:'Sending...'},this.sendFormData(false));this.props.history.push('/list');}},{key:\"handleSave\",value:function handleSave(e){e.preventDefault();this.setState({message:'Sending...'},this.sendFormData(true));this.props.history.push('/list');}},{key:\"handleChange\",value:function handleChange(e){console.log(e.target.name);var f=this.state.food;f[e.target.name]=e.target.value;this.setState({food:f});}},{key:\"handleChangeIngredience\",value:function handleChangeIngredience(e){var f=this.state.food;var id=parseInt(e.target.getAttribute(\"data-id\"));f.ingrediences[id][e.target.name]=e.target.value;this.setState({food:f});}},{key:\"handleChangeStep\",value:function handleChangeStep(e){var f=this.state.food;var id=parseInt(e.target.getAttribute(\"data-id\"));f.steps[id][\"Desc\"]=e.target.value;this.setState({food:f});}},{key:\"addIngredienceField\",value:function addIngredienceField(e){var f=this.state.food;f.ingrediences.push({name:\"\",amount:\"\",unit:\"\"});this.setState({food:f});}},{key:\"removeIngredienceField\",value:function removeIngredienceField(e){console.log(e.target.id);var f=this.state.food;f.ingrediences.splice(parseInt(e.target.id),1);this.setState({food:f});}},{key:\"addStepField\",value:function addStepField(e){var f=this.state.food;f.steps.push({desc:\"\"});this.setState({food:f});}},{key:\"removeStepField\",value:function removeStepField(e){var f=this.state.food;f.steps.pop();this.setState({food:f});}},{key:\"sendFormData\",value:function sendFormData(exist){var _this2=this;setTimeout(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var obj,requestOptions,response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this2.setState({message:'data sent!'});obj=JSON.stringify(_this2.state.food);console.log(\"BODY: \"+obj);requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:obj};if(!exist){_context.next=10;break;}_context.next=7;return fetch(\"/update\",requestOptions);case 7:_context.t0=_context.sent;_context.next=13;break;case 10:_context.next=12;return fetch(\"/add\",requestOptions);case 12:_context.t0=_context.sent;case 13:response=_context.t0;_context.next=16;return response.json();case 16:data=_context.sent;return _context.abrupt(\"return\",data);case 18:case\"end\":return _context.stop();}}},_callee);})),3000);}},{key:\"render\",value:function render(){var _this3=this;var ingredience=[],steps=[];if(this.state.food.ingrediences!=undefined)ingredience=this.state.food.ingrediences.map(function(i,x){return/*#__PURE__*/React.createElement(IngredienceFormGroup,{ingredience:i,index:x.toString(),remove:_this3.removeIngredienceField,handleChange:_this3.handleChangeIngredience});});if(this.state.food.steps!=undefined)steps=this.state.food.steps.map(function(s,i){return/*#__PURE__*/React.createElement(StepFormGroup,{step:s.Desc,id:i,handleChange:_this3.handleChangeStep});});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-2\"},\"N\\xE1zev\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-10\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",name:\"Name\",onChange:this.handleChange,value:this.state.food.name}))),/*#__PURE__*/React.createElement(\"fieldset\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"legend\",{className:\"col-form-label col-sm-2 pt-0\"},\"Radios\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-check\"},/*#__PURE__*/React.createElement(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"Category\",value:\"pol\\xE9vka\",onChange:this.handleChange,checked:this.state.food.category===\"polévka\"}),/*#__PURE__*/React.createElement(\"label\",{className:\"form-check-label\"},\"Pol\\xE9vka\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-check\"},/*#__PURE__*/React.createElement(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"Category\",value:\"hlavn\\xED\",onChange:this.handleChange,checked:this.state.food.category===\"hlavní\"}),/*#__PURE__*/React.createElement(\"label\",{className:\"form-check-label\"},\"Hlavn\\xED chod\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-check\"},/*#__PURE__*/React.createElement(\"input\",{className:\"form-check-input\",type:\"radio\",name:\"Category\",value:\"dezert\",onChange:this.handleChange,checked:this.state.food.category===\"dezert\"}),/*#__PURE__*/React.createElement(\"label\",{className:\"form-check-label\"},\"Dezert\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-2\"},\"Popis\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-10\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",name:\"Description\",onChange:this.handleChange,value:this.state.food.description}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-5\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Ingredience:\"),ingredience,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success row\",onClick:this.addIngredienceField},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPlus}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-7\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Postup:\"),steps,/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger\",onClick:this.removeStepField},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faMinus})),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\",onClick:this.addStepField},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faPlus}))))),this.props.match.path.includes(\"edit\")?/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:this.handleSave},\"Ulo\\u017Eit\"):/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\",onClick:this.handleSubmit},\"Vytvo\\u0159it\"));}}]);return Form;}(React.Component);export default Form;","map":{"version":3,"sources":["D:/programky/cook/react/cook/src/components/Form/Form.js"],"names":["React","styles","FontAwesomeIcon","faPlus","faMinus","IngredienceFormGroup","StepFormGroup","Redirect","parse","Form","props","handleSubmit","bind","handleSave","handleChange","handleChangeIngredience","handleChangeStep","addIngredienceField","removeIngredienceField","addStepField","removeStepField","match","path","includes","obj","JSON","localStorage","getItem","state","food","name","Name","category","Category","description","Description","ingrediences","Ingrediences","steps","Steps","e","preventDefault","setState","message","sendFormData","history","push","console","log","target","f","value","id","parseInt","getAttribute","amount","unit","splice","desc","pop","exist","setTimeout","stringify","requestOptions","method","headers","body","fetch","response","json","data","ingredience","undefined","map","i","x","toString","s","Desc","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport styles from './Form.module.css';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport {faPlus, faMinus} from \"@fortawesome/free-solid-svg-icons\";\nimport IngredienceFormGroup from \"../IngredienceFormGroup/IngredienceFormGroup\";\nimport StepFormGroup from \"../StepFormGroup/StepFormGroup\";\nimport {Redirect} from \"react-router-dom\";\nimport {parse} from \"@fortawesome/fontawesome-svg-core\";\n\nclass Form extends React.Component{\n    constructor(props){\n        super(props);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.handleSave = this.handleSave.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        this.handleChangeIngredience = this.handleChangeIngredience.bind(this);\n        this.handleChangeStep = this.handleChangeStep.bind(this);\n        this.addIngredienceField = this.addIngredienceField.bind(this);\n        this.removeIngredienceField = this.removeIngredienceField.bind(this);\n        this.addStepField = this.addStepField.bind(this);\n        this.removeStepField = this.removeStepField.bind(this);\n\n        if(this.props.match.path.includes(\"edit\")){\n            var obj = JSON.parse(localStorage.getItem(\"detail\"));\n            this.state = {\n                food: {\n                    name: obj.Name,\n                    category: obj.Category,\n                    description: obj.Description,\n                    ingrediences:  obj.Ingrediences != null ? obj.Ingrediences : [],\n                    steps: obj.Steps != null ? obj.Steps : []\n                }\n            };\n        }\n        else\n            this.state = {\n                food: {\n                    name: \"\",\n                    category: \"\",\n                    description: \"\",\n                    ingrediences:  [],\n                    steps: []\n                }\n            };\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n        this.setState({ message: 'Sending...' }, this.sendFormData(false));\n        this.props.history.push('/list')\n    }\n    handleSave(e){\n        e.preventDefault();\n        this.setState({ message: 'Sending...' }, this.sendFormData(true));\n        this.props.history.push('/list')\n    }\n    handleChange(e){\n        console.log(e.target.name);\n        let f = this.state.food;\n        f[e.target.name] = e.target.value;\n        this.setState({food: f});\n    }\n    handleChangeIngredience(e){\n        let f = this.state.food;\n        let id = parseInt(e.target.getAttribute(\"data-id\"));\n        f.ingrediences[id][e.target.name] = e.target.value;\n        this.setState({food: f});\n    }\n    handleChangeStep(e){\n        let f = this.state.food;\n        let id = parseInt(e.target.getAttribute(\"data-id\"));\n        f.steps[id][\"Desc\"] = e.target.value;\n        this.setState({food: f});\n    }\n\n    addIngredienceField(e) {\n        let f = this.state.food;\n        f.ingrediences.push({name: \"\", amount:\"\", unit: \"\"});\n        this.setState({food: f});\n    }\n    removeIngredienceField(e){\n        console.log(e.target.id);\n        let f = this.state.food;\n        f.ingrediences.splice(parseInt(e.target.id), 1);\n        this.setState({food: f});\n    }\n\n    addStepField(e){\n        let f = this.state.food;\n        f.steps.push({desc:\"\"});\n        this.setState({food: f});\n    }\n    removeStepField(e){\n        let f = this.state.food;\n        f.steps.pop();\n        this.setState({food: f});\n    }\n\n    sendFormData(exist) {\n        setTimeout(async () => {\n            this.setState({ message: 'data sent!' });\n            let obj = JSON.stringify(this.state.food);\n            console.log(\"BODY: \" + obj)\n            const requestOptions = {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: obj\n            };\n            let response = exist? await fetch(\"/update\", requestOptions) :  await fetch(\"/add\", requestOptions);\n            let data = await response.json()\n            return data;\n        }, 3000);\n    }\n\n    render(){\n        let ingredience = [], steps = [];\n        if(this.state.food.ingrediences != undefined)\n            ingredience = this.state.food.ingrediences.map( (i,x) =>\n                <IngredienceFormGroup ingredience={i} index={x.toString()} remove={this.removeIngredienceField} handleChange={this.handleChangeIngredience}/>\n                );\n        if(this.state.food.steps != undefined)\n            steps = this.state.food.steps.map((s,i) => { return(<StepFormGroup step={s.Desc} id={i} handleChange={this.handleChangeStep}/>)});\n\n        return(\n        <div>\n                <div className=\"form-group row\">\n                    <label className=\"col-2\">Název</label>\n                    <div className=\"col-10\">\n                        <input type=\"text\" className=\"form-control\" name=\"Name\" onChange={this.handleChange} value={this.state.food.name}/>\n                    </div>\n                </div>\n\n                <fieldset className=\"form-group\">\n                    <div className=\"row\">\n                        <legend className=\"col-form-label col-sm-2 pt-0\">Radios</legend>\n                        <div className=\"col-sm-10\">\n                            <div className=\"form-check\">\n                                <input className=\"form-check-input\" type=\"radio\" name=\"Category\" value=\"polévka\"  onChange={this.handleChange}\n                                       checked={this.state.food.category === \"polévka\"}/>\n                                <label className=\"form-check-label\">Polévka</label>\n                            </div>\n                            <div className=\"form-check\">\n                                <input className=\"form-check-input\" type=\"radio\" name=\"Category\" value=\"hlavní\"  onChange={this.handleChange}\n                                       checked={this.state.food.category === \"hlavní\"}/>\n                                <label className=\"form-check-label\">Hlavní chod</label>\n                            </div>\n                            <div className=\"form-check\">\n                                <input className=\"form-check-input\" type=\"radio\" name=\"Category\" value=\"dezert\" onChange={this.handleChange}\n                                       checked={this.state.food.category === \"dezert\"}/>\n                                <label className=\"form-check-label\">Dezert</label>\n                            </div>\n                        </div>\n                    </div>\n                </fieldset>\n\n                <div className=\"form-group row\">\n                    <label className=\"col-2\">Popis</label>\n                    <div className=\"col-10\">\n                        <input type=\"text\" className=\"form-control\" name=\"Description\" onChange={this.handleChange} value={this.state.food.description}/>\n                    </div>\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"col-5\">\n                        <h3>Ingredience:</h3>\n                        {ingredience}\n                        <button className=\"btn btn-success row\" onClick={this.addIngredienceField}>\n                            <FontAwesomeIcon icon={faPlus} />\n                        </button>\n                    </div>\n                    <div className=\"col-7\">\n                        <h3>Postup:</h3>\n                        {steps}\n                        <div className=\"form-group\">\n                            <button className=\"btn btn-danger\" onClick={this.removeStepField}>\n                                <FontAwesomeIcon icon={faMinus} />\n                            </button>\n                            <button className=\"btn btn-success\" onClick={this.addStepField}>\n                                <FontAwesomeIcon icon={faPlus} />\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            {this.props.match.path.includes(\"edit\") ?\n                <button type=\"submit\" className=\"btn btn-primary\" onClick={this.handleSave}>Uložit</button>\n                :\n                <button type=\"submit\" className=\"btn btn-primary\" onClick={this.handleSubmit}>Vytvořit</button>\n            }\n        </div>\n        );\n    }\n}\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}